<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Images and DockerFile | Tanmay's Blog</title><meta name=keywords content="Docker,Basics,microservices"><meta name=description content="This post goes over what are DockerFiles and Docker Images"><meta name=author content="Tanmay"><link rel=canonical href=https://tanmaychimurkar.github.io/posts/docker/docker_images/><link crossorigin=anonymous href=/assets/css/stylesheet.b183800e2cfbb62c3bce2b2ba56cdb2dd33af76c75cf4550173d5dfebd7c68a6.css integrity="sha256-sYOADiz7tiw7zisrpWzbLdM692x1z0VQFz1d/r18aKY=" rel="preload stylesheet" as=style><link rel=icon href=https://tanmaychimurkar.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tanmaychimurkar.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tanmaychimurkar.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tanmaychimurkar.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tanmaychimurkar.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Docker Images and DockerFile"><meta property="og:description" content="This post goes over what are DockerFiles and Docker Images"><meta property="og:type" content="article"><meta property="og:url" content="https://tanmaychimurkar.github.io/posts/docker/docker_images/"><meta property="og:image" content="https://miro.medium.com/max/1400/1*vb_5008Zbt_pHj7qx44p0Q.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-11T10:18:38+00:00"><meta property="article:modified_time" content="2022-08-11T10:18:38+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://miro.medium.com/max/1400/1*vb_5008Zbt_pHj7qx44p0Q.png"><meta name=twitter:title content="Docker Images and DockerFile"><meta name=twitter:description content="This post goes over what are DockerFiles and Docker Images"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://tanmaychimurkar.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Docker","item":"https://tanmaychimurkar.github.io/posts/docker/"},{"@type":"ListItem","position":4,"name":"Docker Images and DockerFile","item":"https://tanmaychimurkar.github.io/posts/docker/docker_images/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Images and DockerFile","name":"Docker Images and DockerFile","description":"This post goes over what are DockerFiles and Docker Images","keywords":["Docker","Basics","microservices"],"articleBody":"Docker Imagesüê≥ As we saw in the basics of Docker post, the base flow of every Docker container is an image. A Docker image, whether custom or pre-built, is absolutely necessary for us to be able to run anything using Docker.\nIn essence, a Docker image is a union of layered filesystem stacked on top of each other. This stands true for pre-built images as well as custom images that we might create using some pre-built image as a base.\nTriviaüí°: If every Docker image is a set of layered instructions, then how is the first Docker image created? What did the very first Docker image have as a layer to be built on top of?\nHoping that the description of the Docker images is clear now, let‚Äôs now take a look at our first Docker image. And what better to look at than the image of Ubuntu itself!?!?\nDocker Image on Hub Use this link to navigate to the Docker Hub page of the Ubuntu image. Once there, go through the ‚ÄòWhat is Ubuntu?‚Äô, and ‚ÄòWhat‚Äôs in this image?‚Äô section. As you might have read, this image is Ubuntu. We can use this image for general purpose stuff on Ubuntu.\nNow let‚Äôs go to the ‚ÄòTags‚Äô section on the webpage, and see what we find there. We can see that there many tags, and the first one that appears should have the TAG ‚ÄòLatest‚Äô, and on it‚Äôs right, there should be a command that says: docker pull ubuntu:latest. If we look at the next tag after Latest, notice how the docker pull command changes slightly with the name of the TAG that we are referring to! Also, take a look at the size of the image. It should be around 25-30 MB. WHATTTTTTT!!!! This means that the docker image that can run Ubuntu instructions is only 30 MB in size.üôÄ\nLet‚Äôs stop for a moment here and summarize what we have seen so far:\nDocker Hub has many pre-built images ready for us to explore Almost all the images have a description about what they are and a small summary of what they contain. Some have much greater description in terms of the Environment Variables, but let‚Äôs look at it later All the pre-built images on Docker Hub have Tags, and every tag is a version of the image Every image tag has a set of instructions about how to pull it. Let‚Äôs understand what the pull command does!üêï\nDocker Pullüßó Seeing that we have a command linked to a image on Docker Hub, naturally the next step is to get our hands dirty. This helps me get out of my comfort zone, but also helps me bring a concept that I am trying to grasp much easier to understand. I hope this also works the same for youüêà\nImp. Noteüê≥: For getting our hands dirty here, it is advised to go through the installation of Docker Desktop. Personally, I like the Docker Engine with the compose tool more, but to begin with, either of the two installations should work fine.\nWith Docker installed on your system, let‚Äôs verify the docker version. This can be done by opening a terminal and typing:\ndocker --version If you see a message with version, then we are good to get into the fun part.\nIn the terminal, type the below command to check the current images that docker has on your machine:\ndocker images If you see nothing, or only see the hello-world image, then we are good to go. Let‚Äôs now run the command that we saw on Docker Hub page of Ubuntu:\ndocker pull ubuntu:latest Once you run this command, you should see something similar to this:\nlatest: Pulling from library/ubuntu 6e3729cf69e0: Pull complete Digest: sha256:27cb6e6ccef575a4698b66f5de06c7ecd61589132d5a91d098f7f3f9285415a9 Status: Downloaded newer image for ubuntu:latest docker.io/library/ubuntu:latest What docker pull does is it pulls the image from Docker Hub into your local machine. Once the above output is visible in the terminal, we can check the images again with docker images, and now we should see the ubuntu image with the latest tag in the terminal.\nThis is the way for us to pull pre-built images from Docker Hub\nDockerFileüê≥ Since Docker images are a union of layered filesystem stacked on top of each other, we can also build our own custom image that does something that we want by building it on top of another pre-built image. To build our own image, we first need to create a DockerFile, which is a configuration file that has commands that Docker uses to build our image. Let‚Äôs have a look at the terminology that the DockerFile has.\nTerminologyüìñ DockerFile is just a text document that contains a set of instructions in order that Docker has to execute to build our image. Let‚Äôs now look at some of the most used commands that we need to build our own Docker image, while the main list of commands is still available under DockerFile reference.\nFROM: This commands sets the base image that we want our own image to be built on top of. Every DockerFile should start with a FROM command, since every image is built on top of another image.\nRUN: As the name suggests, this command is used to execute a set of instructions on top of the base image that we use for our own custom image. RUN commands can be run in two ways: either in shell form, or in exec form, which means there are two ways to run commands for the RUN instruction. The shell form for RUN directly uses the instruction like RUN sh -c echo hello, while in the exec form, the same command would be run as RUN [\"sh\", \"-c\", \"echo hello\"]\nCOPY: This command is used to copy something from our project code inside the Docker image. The copy command needs a source location to copy from and a destination location to copy inside the Docker image.\nWORKDIR: Sets the current working directory for the Docker image, such that all the instructions that follow the after setting WORKDIR will be executed from that directory.\nCMD: This instruction is used to specify the default arguments that we want the Docker image to take when we run it. There can only be one CMD instruction in a DockerFile, and if we have multiple, then only the last one will be executed. CMD instruction works as setting default arguments when we want to run an image.\nENTRYPOINT: As CMD sets a default command, the ENTRYPOINT command can override it. However, how the command is overridden depends on the whether the shell form is used or the exec form is used. The most intuitive explanation of the interaction between CMD and ENTRYPOINT is in the Docker documentation\nWhew!!üòå That was a lot of terminology, and we have not even covered eveything from the DockerFile reference. However, we do not need to understand how each and every parameter works in order to get started. Instead, these are the most common commands that are usually inside a DockerFile while building custom images.\nLet‚Äôs now build our own Docker image by building a DockerFileü§©\nCreating a DockerFile‚úçÔ∏è If you have gone through the installation process of installing Docker, you might have come across the hello-world example of docker. But in our case, let‚Äôs redo the hello-world example in Python, but by building our own Docker image.\nFirst thing is to create a simple Python script by placing the following line inside:\nprint(f'Hello world from inside the Docker container!') Next step is to copy the below code into a file and naming it Dockerfile:\nFROM python WORKDIR /usr/src/app COPY hello_world.py ./ CMD [\"python\", \"hello_world.py\"] In this file, we can see the following thing:\nThe first command we write is the FROM instruction, with the python image being used. Note that if we do not mention a default tag, then the latest tag is taken as default. The second instruction is setting the WORKDIR, which is like navigating to the /usr/src/app directory inside the container. The third instruction is COPY, which selects the hello_world.py to the current working directory set by the WORKDIR command The last instruction is CMD, which sets the default command to run when the image is started as a container. Building your image‚öíÔ∏è Once the above file is created, navigate to the folder containing the file and build the image using the Dockerfile that we created in the step above. The build command is used to build an image from a particular Dockerfile by using all the instructions from inside the Dockerfile. The -t flag is used to give a name and a tag to our image, similar to the name and the tag we see on Docker Hub. Run the following command in the terminal where the Dockerfile is located:\ndocker build -t custom_image:latest . Once the above command is run, we should see something like this in the terminal:\nStep 1/4 : FROM python latest: Pulling from library/python f2f58072e9ed: Pull complete 5c8cfbf51e6e: Pull complete aa3a609d1579: Pull complete 094e7d9bb04e: Pull complete 2cbfd734f382: Pull complete aa86ac293d0f: Pull complete 4cffc9f44941: Pull complete ae2c75627c86: Pull complete 2d2b74d2f0f7: Pull complete Digest: sha256:11560799e4311fd5abcca7ace13585756d7222ce5471162cd78c78a4ecaf62bd Status: Downloaded newer image for python:latest ---\u003e 539eccd5ee4e Step 2/4 : WORKDIR /usr/src/app ---\u003e Running in a63f44fb58c6 Removing intermediate container a63f44fb58c6 ---\u003e 266dd62fca08 Step 3/4 : COPY hello_world.py ./ ---\u003e 016f934d50e5 Step 4/4 : CMD [\"python\", \"hello_world.py\"] ---\u003e Running in b38de1b256fa Removing intermediate container b38de1b256fa ---\u003e 432ba341135f Successfully built 432ba341135f Successfully tagged custom_image:latest As we analyze the output of the build command, we can see the following things:\nEvery instruction starts with the Step comment, followed by the step number which is currently being executed. For example, in Step 1/4, we can see that the docker engine is pulling the image from the Docker Hub to our local machine. Every instruction that we provided in the Dockerfile is echoed first, followed by its execution hash. Once all the instructions are executed, we get the final message saying Successfully built and Successfully tagged custom_image:latest. This message means that our custom image is now built. [Bonus]Running your custom imageüèÉ Once the above commands are run in the order we specify, we can check the list of images we have on our local machine by running the following command in the terminal:\ndocker images Here, we should see our custom_image being listed amongst other images, if any. Now that we have built our custom image, it is time to run it. For now, let‚Äôs copy the following command in the terminal to run the image as a container (Don‚Äôt worry about the below line of code, we will look at it in the here):\ndocker run custom_image:latest Once we execute the above command, we should see our print message in the terminal: Hello world from inside the Docker container!\nCongratulations!!ü•≥üéâ You have successfully built your first custom image. You are already a Docker Pro!!ü§ì\nSumming Up!üí° We saw in this post how once can either pull images from the Docker Hub or create their own custom images, and run them from the terminal. The next post will now focus more on the later part of running the image once we have it on our machine.\nUntil then, Cheers!!üï∫üíÉ\n","wordCount":"1873","inLanguage":"en","image":"https://miro.medium.com/max/1400/1*vb_5008Zbt_pHj7qx44p0Q.png","datePublished":"2022-08-11T10:18:38Z","dateModified":"2022-08-11T10:18:38Z","author":{"@type":"Person","name":"Tanmay"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tanmaychimurkar.github.io/posts/docker/docker_images/"},"publisher":{"@type":"Organization","name":"Tanmay's Blog","logo":{"@type":"ImageObject","url":"https://tanmaychimurkar.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tanmaychimurkar.github.io accesskey=h title="Tanmay's Blog (Alt + H)">Tanmay's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tanmaychimurkar.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://tanmaychimurkar.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://tanmaychimurkar.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://tanmaychimurkar.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tanmaychimurkar.github.io>Home</a>&nbsp;¬ª&nbsp;<a href=https://tanmaychimurkar.github.io/posts/>Posts</a>&nbsp;¬ª&nbsp;<a href=https://tanmaychimurkar.github.io/posts/docker/>Docker</a></div><h1 class=post-title>Docker Images and DockerFile</h1><div class=post-description>This post goes over what are DockerFiles and Docker Images</div><div class=post-meta><span title='2022-08-11 10:18:38 +0000 UTC'>August 11, 2022</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;Tanmay&nbsp;|&nbsp;<a href=https://github.com/tanmaychimurkar/tanmaychimurkar.github.io/tree/main/content/posts/docker/docker_images.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://miro.medium.com/max/1400/1*vb_5008Zbt_pHj7qx44p0Q.png alt=Docker><p>Process flow for creating custom Docker Images using DockerFile</p></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#docker-images aria-label="Docker Imagesüê≥">Docker Imagesüê≥</a><ul><li><a href=#docker-image-on-hub aria-label="Docker Image on Hub">Docker Image on Hub</a></li><li><a href=#docker-pull aria-label="Docker Pullüßó">Docker Pullüßó</a></li></ul></li><li><a href=#dockerfile aria-label=DockerFileüê≥>DockerFileüê≥</a><ul><li><a href=#terminology aria-label=Terminologyüìñ>Terminologyüìñ</a></li><li><a href=#creating-a-dockerfile aria-label="Creating a DockerFile‚úçÔ∏è">Creating a DockerFile‚úçÔ∏è</a></li><li><a href=#building-your-image aria-label="Building your image‚öíÔ∏è">Building your image‚öíÔ∏è</a></li><li><a href=#bonusrunning-your-custom-image aria-label="[Bonus]Running your custom imageüèÉ">[Bonus]Running your custom imageüèÉ</a></li><li><a href=#summing-up aria-label="Summing Up!üí°">Summing Up!üí°</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=docker-images>Docker Imagesüê≥<a hidden class=anchor aria-hidden=true href=#docker-images>#</a></h2><p>As we saw in the <a href=https://tanmaychimurkar.github.io/posts/docker/docker_intro/ title="Docker Basics">basics of Docker</a> post, the base flow of every Docker
container is an image. A Docker image, whether custom or pre-built, is absolutely necessary for us to be able to run
anything using Docker.</p><p>In essence, a Docker image is a union of layered filesystem stacked on top of each other. This stands true for pre-built images as well as custom images that we might create using some pre-built image as a base.</p><p><code>Triviaüí°</code>: If every Docker image is a set of layered instructions, then how is the first Docker image created? What
did the very first Docker image have as a layer to be built on top of?</p><p>Hoping that the description of the Docker images is clear now, let&rsquo;s now take a look at our first Docker image. And
what better to look at than the image of <strong>Ubuntu</strong> itself!?!?</p><h3 id=docker-image-on-hub>Docker Image on Hub<a hidden class=anchor aria-hidden=true href=#docker-image-on-hub>#</a></h3><p>Use <a href=https://hub.docker.com/_/ubuntu>this</a> link to navigate to the Docker Hub page of the Ubuntu image. Once there,
go through the &lsquo;<strong>What is Ubuntu?</strong>&rsquo;, and &lsquo;<strong>What&rsquo;s in this image?</strong>&rsquo; section. As you might have read, this image <em><strong>is Ubuntu</strong></em>.
We can use this image for general purpose stuff on Ubuntu.</p><p>Now let&rsquo;s go to the &lsquo;<strong>Tags</strong>&rsquo; section on the webpage, and see what we find there. We can see that there many tags,
and the first one that appears should have the TAG &lsquo;<strong>Latest</strong>&rsquo;, and on it&rsquo;s right, there should be a command that says:
<code>docker pull ubuntu:latest</code>. If we look at the next tag after <strong>Latest</strong>, notice how the <code>docker pull</code> command changes
slightly with the name of the <strong>TAG</strong> that we are referring to! Also, take a look at the size of the image. It should be
around 25-30 MB. WHATTTTTTT!!!! This means that the docker image that can run <strong>Ubuntu</strong> instructions is only 30 MB in size.üôÄ</p><p>Let&rsquo;s stop for a moment here and summarize what we have seen so far:</p><ol><li>Docker Hub has many pre-built images ready for us to explore</li><li>Almost all the images have a description about what they are and a small summary of what they contain. Some have
much greater description in terms of the <strong>Environment Variables</strong>, but let&rsquo;s look at it later</li><li>All the pre-built images on Docker Hub have <strong>Tags</strong>, and every tag is a version of the image</li><li>Every image tag has a set of instructions about how to <strong>pull</strong> it.</li></ol><p>Let&rsquo;s understand what the <strong>pull</strong> command does!üêï</p><h3 id=docker-pull>Docker Pullüßó<a hidden class=anchor aria-hidden=true href=#docker-pull>#</a></h3><p>Seeing that we have a command linked to a image on Docker Hub, naturally the next step is to get our hands dirty. This
helps me get out of my comfort zone, but also helps me bring a concept that I am trying to grasp much easier to
understand. I hope this also works the same for youüêà</p><p><strong>Imp. Noteüê≥</strong>: For getting our hands dirty here, it is advised to go through the installation of
<a href=https://docs.docker.com/get-docker/>Docker Desktop</a>. Personally, I like the
<a href=https://docs.docker.com/engine/install/ubuntu/>Docker Engine</a> with the
<a href=https://docs.docker.com/compose/install/other/>compose</a> tool more, but to begin with, either of the two installations
should work fine.</p><p>With Docker installed on your system, let&rsquo;s verify the docker version. This can be done by opening a terminal and
typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker --version 
</span></span></code></pre></div><p>If you see a message with version, then we are good to get into the fun part.</p><p>In the terminal, type the below command to check the current images that docker has on your machine:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker images
</span></span></code></pre></div><p>If you see nothing, or only see the <code>hello-world</code> image, then we are good to go. Let&rsquo;s now run the command that we saw
on Docker Hub page of <strong>Ubuntu</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker pull ubuntu:latest
</span></span></code></pre></div><p>Once you run this command, you should see something similar to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>latest: Pulling from library/ubuntu
</span></span><span class=line><span class=cl>6e3729cf69e0: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>Digest: sha256:27cb6e6ccef575a4698b66f5de06c7ecd61589132d5a91d098f7f3f9285415a9
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> ubuntu:latest
</span></span><span class=line><span class=cl>docker.io/library/ubuntu:latest
</span></span></code></pre></div><p>What <code>docker pull</code> does is it pulls the image from Docker Hub into your local machine. Once the above output is visible
in the terminal, we can check the images again with <code>docker images</code>, and now we should see the <code>ubuntu</code> image with the
<code>latest</code> tag in the terminal.</p><p>This is the way for us to pull pre-built images from Docker Hub</p><h2 id=dockerfile>DockerFileüê≥<a hidden class=anchor aria-hidden=true href=#dockerfile>#</a></h2><p>Since Docker images are a union of layered filesystem stacked on top of each other, we can also build our own custom
image that does something that we want by building it on top of another pre-built image. To build our own image, we
first need to create a <code>DockerFile</code>, which is a configuration file that has commands that Docker uses to build our
image. Let&rsquo;s have a look at the terminology that the <code>DockerFile</code> has.</p><h3 id=terminology>Terminologyüìñ<a hidden class=anchor aria-hidden=true href=#terminology>#</a></h3><p><code>DockerFile</code> is just a text document that contains a set of instructions in order that Docker has to execute to build
our image. Let&rsquo;s now look at some of the most used commands that we need to build our own Docker image, while the main
list of commands is still available under <a href=https://docs.docker.com/engine/reference/builder/>DockerFile reference</a>.</p><ol><li><p><code>FROM</code>: This commands sets the base image that we want our own image to be built on top of. Every <code>DockerFile</code>
should start with a <code>FROM</code> command, since every image is built on top of another image.</p></li><li><p><code>RUN</code>: As the name suggests, this command is used to execute a set of instructions on top of the base image that we
use for our own custom image. <code>RUN</code> commands can be <em>run</em> in two ways: either in <em>shell</em> form, or in <em>exec</em> form, which
means there are two ways to <em>run</em> commands for the <code>RUN</code> instruction. The <em>shell</em> form for <code>RUN</code> directly uses the
instruction like <code>RUN sh -c echo hello</code>, while in the <em>exec</em> form, the same command would be run as <code>RUN ["sh", "-c", "echo hello"]</code></p></li><li><p><code>COPY</code>: This command is used to <em>copy</em> something from our project code inside the Docker image. The copy command
needs a <code>source</code> location to copy from and a <code>destination</code> location to copy inside the Docker image.</p></li><li><p><code>WORKDIR</code>: Sets the current working directory for the Docker image, such that all the instructions that follow the
after setting <code>WORKDIR</code> will be executed from that directory.</p></li><li><p><code>CMD</code>: This instruction is used to specify the default arguments that we want the Docker image to take when we run
it. There can only be <strong>one</strong> <code>CMD</code> instruction in a DockerFile, and if we have multiple, then only the last one will
be executed. <code>CMD</code> instruction works as setting default arguments when we want to run an image.</p></li><li><p><code>ENTRYPOINT</code>: As <code>CMD</code> sets a default command, the <code>ENTRYPOINT</code> command can override it. However, how the command
is overridden depends on the whether the <em>shell</em> form is used or the <em>exec</em> form is used. The most intuitive explanation
of the interaction between <code>CMD</code> and <code>ENTRYPOINT</code> is in the
<a href=https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact>Docker documentation</a></p></li></ol><p>Whew!!üòå That was a lot of terminology, and we have not even covered eveything from the
<a href=https://docs.docker.com/engine/reference/builder/>DockerFile reference</a>. However, we do not need to understand how
each and every parameter works in order to get started. Instead, these are the most common commands that are usually
inside a <code>DockerFile</code> while building custom images.</p><p>Let&rsquo;s now build our own Docker image by building a <code>DockerFile</code>ü§©</p><h3 id=creating-a-dockerfile>Creating a DockerFile‚úçÔ∏è<a hidden class=anchor aria-hidden=true href=#creating-a-dockerfile>#</a></h3><p>If you have gone through the installation process of installing Docker, you might have come
across the <code>hello-world</code> example of docker. But in our case, let&rsquo;s redo the <code>hello-world</code> example in <code>Python</code>,
but by building our own Docker image.</p><p>First thing is to create a simple Python script by placing the following line inside:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Hello world from inside the Docker container!&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>Next step is to copy the below code into a file and naming it <code>Dockerfile</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> python</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /usr/src/app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> hello_world.py ./<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;python&#34;</span><span class=p>,</span> <span class=s2>&#34;hello_world.py&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></div><p>In this file, we can see the following thing:</p><ol><li>The first command we write is the <code>FROM</code> instruction, with the <code>python</code> image being used. Note that if we do not
mention a default tag, then the <code>latest</code> tag is taken as default.</li><li>The second instruction is setting the <code>WORKDIR</code>, which is like navigating to the <code>/usr/src/app</code> directory
inside the container.</li><li>The third instruction is <code>COPY</code>, which selects the <code>hello_world.py</code> to the current working directory set
by the <code>WORKDIR</code> command</li><li>The last instruction is <code>CMD</code>, which sets the default command to run when the image is started as a container.</li></ol><h3 id=building-your-image>Building your image‚öíÔ∏è<a hidden class=anchor aria-hidden=true href=#building-your-image>#</a></h3><p>Once the above file is created, navigate to the folder containing the file and <code>build</code> the image using the
<code>Dockerfile</code> that we created in the step above. The <code>build</code> command is used to build an image from a particular
<code>Dockerfile</code> by using all the instructions from inside the <code>Dockerfile</code>. The <code>-t</code> flag is used to give a name and a tag
to our image, similar to the name and the tag we see on Docker Hub. Run the following command in the terminal where the
<code>Dockerfile</code> is located:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker build -t custom_image:latest .
</span></span></code></pre></div><p>Once the above command is run, we should see something like this in the terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Step 1/4 : FROM python
</span></span><span class=line><span class=cl>latest: Pulling from library/python
</span></span><span class=line><span class=cl>f2f58072e9ed: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>5c8cfbf51e6e: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>aa3a609d1579: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>094e7d9bb04e: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>2cbfd734f382: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>aa86ac293d0f: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>4cffc9f44941: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>ae2c75627c86: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>2d2b74d2f0f7: Pull <span class=nb>complete</span> 
</span></span><span class=line><span class=cl>Digest: sha256:11560799e4311fd5abcca7ace13585756d7222ce5471162cd78c78a4ecaf62bd
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> python:latest
</span></span><span class=line><span class=cl> ---&gt; 539eccd5ee4e
</span></span><span class=line><span class=cl>Step 2/4 : WORKDIR /usr/src/app
</span></span><span class=line><span class=cl> ---&gt; Running in a63f44fb58c6
</span></span><span class=line><span class=cl>Removing intermediate container a63f44fb58c6
</span></span><span class=line><span class=cl> ---&gt; 266dd62fca08
</span></span><span class=line><span class=cl>Step 3/4 : COPY hello_world.py ./
</span></span><span class=line><span class=cl> ---&gt; 016f934d50e5
</span></span><span class=line><span class=cl>Step 4/4 : CMD <span class=o>[</span><span class=s2>&#34;python&#34;</span>, <span class=s2>&#34;hello_world.py&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl> ---&gt; Running in b38de1b256fa
</span></span><span class=line><span class=cl>Removing intermediate container b38de1b256fa
</span></span><span class=line><span class=cl> ---&gt; 432ba341135f
</span></span><span class=line><span class=cl>Successfully built 432ba341135f
</span></span><span class=line><span class=cl>Successfully tagged custom_image:latest
</span></span></code></pre></div><p>As we analyze the output of the <code>build</code> command, we can see the following things:</p><ol><li>Every instruction starts with the <code>Step</code> comment, followed by the step number which is currently being executed. For example, in
<code>Step 1/4</code>, we can see that the docker engine is pulling the image from the Docker Hub to our local machine.</li><li>Every instruction that we provided in the <code>Dockerfile</code> is echoed first, followed by its execution hash.</li><li>Once all the instructions are executed, we get the final message saying <code>Successfully built &lt;hash></code> and <code>Successfully tagged custom_image:latest</code>. This message means that our custom image is now built.</li></ol><h3 id=bonusrunning-your-custom-image>[Bonus]Running your custom imageüèÉ<a hidden class=anchor aria-hidden=true href=#bonusrunning-your-custom-image>#</a></h3><p>Once the above commands are run in the order we specify, we can check the list of images we have on our local machine by
running the following command in the terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker images
</span></span></code></pre></div><p>Here, we should see our <code>custom_image</code> being listed amongst other images, if any. Now that we have built our custom image,
it is time to run it. For now, let&rsquo;s copy the following command in the terminal to run the image as a container
(Don&rsquo;t worry about the below line of code, we will look at it in the
<a href=https://tanmaychimurkar.github.io/posts/docker/docker_containers/ title="Docker Containers">here</a>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run custom_image:latest
</span></span></code></pre></div><p>Once we execute the above command, we should see our print message in the terminal: <code>Hello world from inside the Docker container!</code></p><p>Congratulations!!ü•≥üéâ You have successfully built your first custom image. You are already a Docker Pro!!ü§ì</p><h3 id=summing-up>Summing Up!üí°<a hidden class=anchor aria-hidden=true href=#summing-up>#</a></h3><p>We saw in this post how once can either pull images from the Docker Hub or create their own custom images, and run them
from the terminal. The <a href=https://tanmaychimurkar.github.io/posts/docker/docker_containers/ title="Docker Containers">next</a> post will now focus more on the
later part of running the image once we have it on our machine.</p><p>Until then, Cheers!!üï∫üíÉ</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://tanmaychimurkar.github.io/tags/docker/>Docker</a></li><li><a href=https://tanmaychimurkar.github.io/tags/basics/>Basics</a></li><li><a href=https://tanmaychimurkar.github.io/tags/microservices/>microservices</a></li></ul><nav class=paginav><a class=prev href=https://tanmaychimurkar.github.io/posts/configurations/yaml_files/><span class=title>¬´ Prev</span><br><span>Configuration files</span></a>
<a class=next href=https://tanmaychimurkar.github.io/posts/rust/chap3/><span class=title>Next ¬ª</span><br><span>Rust Documentation: Chapter 3</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on twitter" href="https://twitter.com/intent/tweet/?text=Docker%20Images%20and%20DockerFile&amp;url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f&amp;hashtags=Docker%2cBasics%2cmicroservices"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f&amp;title=Docker%20Images%20and%20DockerFile&amp;summary=Docker%20Images%20and%20DockerFile&amp;source=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f&title=Docker%20Images%20and%20DockerFile"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on whatsapp" href="https://api.whatsapp.com/send?text=Docker%20Images%20and%20DockerFile%20-%20https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Images and DockerFile on telegram" href="https://telegram.me/share/url?text=Docker%20Images%20and%20DockerFile&amp;url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_images%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tanmaychimurkar.github.io>Tanmay's Blog</a></span>
<span>Made with &#128151; with
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>