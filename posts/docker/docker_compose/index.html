<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker Compose | Tanmay's Blog</title><meta name=keywords content="Docker,microservices"><meta name=description content="This post explores how we can run multiple Docker containers using a Docker Compose file"><meta name=author content="Tanmay"><link rel=canonical href=https://tanmaychimurkar.github.io/posts/docker/docker_compose/><link crossorigin=anonymous href=/assets/css/stylesheet.b183800e2cfbb62c3bce2b2ba56cdb2dd33af76c75cf4550173d5dfebd7c68a6.css integrity="sha256-sYOADiz7tiw7zisrpWzbLdM692x1z0VQFz1d/r18aKY=" rel="preload stylesheet" as=style><link rel=icon href=https://tanmaychimurkar.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tanmaychimurkar.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tanmaychimurkar.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tanmaychimurkar.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tanmaychimurkar.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Docker Compose"><meta property="og:description" content="This post explores how we can run multiple Docker containers using a Docker Compose file"><meta property="og:type" content="article"><meta property="og:url" content="https://tanmaychimurkar.github.io/posts/docker/docker_compose/"><meta property="og:image" content="https://tcude.net/content/images/2022/01/MainImage-2.jpeg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-13T05:34:54+00:00"><meta property="article:modified_time" content="2022-10-13T05:34:54+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tcude.net/content/images/2022/01/MainImage-2.jpeg"><meta name=twitter:title content="Docker Compose"><meta name=twitter:description content="This post explores how we can run multiple Docker containers using a Docker Compose file"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://tanmaychimurkar.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Docker","item":"https://tanmaychimurkar.github.io/posts/docker/"},{"@type":"ListItem","position":4,"name":"Docker Compose","item":"https://tanmaychimurkar.github.io/posts/docker/docker_compose/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Compose","name":"Docker Compose","description":"This post explores how we can run multiple Docker containers using a Docker Compose file","keywords":["Docker","microservices"],"articleBody":"Why Docker Compose‚ÅâÔ∏è In the previous post, we saw how to run a Docker Container from a Docker image, either custom or pre-built image from the DockerHub. However, as we discussed, a big software is not built on just one Docker Container but many containers, working as microservices. When running multiple such containers, it is important that they are able to interact with each other, be able to exchange data, and thus act as independent blocks of a larger piece of software. In this post, we will go over how to thus run multiple containers together.\nWhat is Docker Compose file?üêô Running multiple containers can be done by a Docker Compose file, that acts as a configuration file to choose multiple Docker Images and start them as containers, such that they are able to interact with each other.\nDocker Compose file, also known as docker-compose.yml, is a configuration file used to define the services, networks and volumes for a multi-container Docker application. With the help of docker-compose command, the services defined in the file can be easily started, stopped, scaled, and managed as a single unit. The file is written in YAML format, which is easy to read and understand. It allows developers to define the complete environment for an application in a single file, and manage it more efficiently.\nDon‚Äôt be fooled by me throwing the terms services, networks and volumes from the description as some sort of concepts that everyone must know. These are terminologies specific to the docker-compose.yml file, and are used as a standard base to create the compose configuration file. Let‚Äôs look at them in a short detail below.\ndocker-compose.yml terminologyüìö Below is a list of some of the main terminology that a docker-compose.yml file should follow.\nservices: The services section is used to define the individual components or microservices that make up the application. Each service is defined as a separate block, with its own configuration options. The options available for each service include the image to use, environment variables, ports to expose, volumes to mount, and links to other services. For example, a simple web application might have two services: a web server and a database. The web server service would be defined with the image to use, environment variables, and ports to expose. The database service would be defined with the image to use, environment variables, and volumes to mount.\nnetworks: The networks section is used to define virtual networks that the services in the application can connect to. Services can be connected to multiple networks, allowing them to communicate with each other. When a service is connected to a network, it is given an IP address on that network and can communicate with other services on the same network using their IP addresses. This allows services to be isolated from the host system and from the external network, while still being able to communicate with each other. It‚Äôs also possible to create custom networks and connect services to them. For example, a docker-compose.yml file may define a default network called default and a custom network called backend where all services that need to communicate with each other privately are connected to.\nvolumes: The volumes section is used to define storage volumes that can be used by the services in the application. A volume is a way to store data outside a container‚Äôs filesystem, so that it can be accessed by multiple containers and persist data even if the container is deleted. The storage volumes defined by us are stored in our local machine, under the /var/lib/docker/volumes folder. Volumes can be defined in a docker-compose.yml file and then mounted to a specific service‚Äôs container. They can also be defined as external, which means that they are managed outside docker-compose and can be shared by multiple applications. For example, if you have a service that needs to store some data, you can create a volume and mount it to that service‚Äôs container. This way, even if the container is recreated or deleted, the data stored in the volume will persist. It‚Äôs also possible to use named volumes, which allows you to reference the volume by name instead of by path on the host. This can make it easier to manage volumes across different environments.\nThese are only some of the standard terms that are in the docker-compose file. However, let us now look at an example of the docker-compose file itself to see what the structure of it is.\nStructure of the docker-compose.yml fileüìã As we read before, the docker-compose.yml is only a YAML configuration file. Below is the structure of a very small compose file, that runs the PostgreSQL and the pgAdmin UI tool together.\nThe below docker-compose.yml file is designed in such a way that we use most of the possible terms that appear in the docker-compose.yml file. Do not worry if you don‚Äôt completely understand each and every term in the file, we will go through their descriptions later. For now, let us have a look at how the file itself looks first.\nNOTE: If you want to learn more about what YAML files are, have a look at YAML or read the official YAML documentation.\nversion: \"3\" services: postgres: image: postgres restart: always environment: POSTGRES_PASSWORD: postgres POSTGRES_USER: postgres ports: - 5432:5432 volumes: - postgres:/var/lib/postgresql/data pgadmin: image: dpage/pgadmin4 environment: PGADMIN_DEFAULT_EMAIL: admin@pgadmin.com PGADMIN_DEFAULT_PASSWORD: password PGADMIN_LISTEN_PORT: 80 ports: - 1542:80 volumes: - pgadmin:/var/lib/pgadmin depends_on: - postgres volumes: postgres: pgadmin: We can now see that the terms services and volumes are defined in the above compose file, however there are also new terms that we did not yet see. Let us now go through the compose file above to see what each entry means.\npostgres/pgadmin: This is the name we want to give to the services before we start defining them. Once we run the containers defined in the compose file, we will see each running container for a service by this name. And just like in the previous post, we can exec into each of the services by the name that we choose to give it. Please note that the name is given by us, and is not something that is attached to a particular image. image: This is the image that we want the service to use when we run it. This can be either an image from the DockerHub, or our own image. If we are using owr own custom image in the compose file, then it‚Äôs relative path compared to the docker-compose.yml file should be passed in the image term. environment: This term defines a list of environment variables that we want our services to use. The environment variables are not shared across different services, and should be defined individually for each of the service that we define in the docker-compose file. ports: This term is central for the end user running the docker-compose file. This term defines the port that is to be exposed on the local machine from inside the docker network that is defined when the docker-compose.yml file is run. For us to be able to access a running application, we define the port in the first part of the ports, and the second part is the port that the service is running on inside the docker network. volumes: There are 2 ways volumes can be defined in the docker-compose file: named volumes: These volumes are managed by docker-compose and can be referenced by name in the docker-compose.yml file. bind mounts: These volumes are defined by a specific path on the host machine and mounted inside the container. Usually, it is advised to use named volumes instead of bind volumes in the compose file, as named volumes are managed directly by Docker, and can be moved/deleted using the Docker CLI. The volume that is defined in the above compose file are also named volumes, where the first half of the volumes term is the name we want to give to the names volume, and the second half is the actual location of the directory that we want to be stored in our named volume. depends_on: This is a term that controls if a service is dependent on any other service. We have to define the names of the services that we want to start before the current service where the depends_on term is defined. This makes sense by looking at the above scenario: We do not want the pgadmin service to start before the postgres service, as there will be no database to attach to, and thus the tool will not be able to locate our database. Phew!! That was a very long terminology that is followed inside the docker-compose.yml file. However, there should still be some alarm bells ringing in your head if you read the above descriptions.\nHow do we know what volume to mount on our local machine? How do we know what environment variables to define for a service to be able to run successfully? What is the default port that are particular service starts at when we run it? Fret not! These questions all have a answer that is easy to find.\nGet variables for a service based on the imageüîç All the above questions are dependent on the Docker Image that a particular service is using. For example, if you look at the Environment Variables section of the postgres image on DockerHub, then you will find that the environment variable POSTGRES_PASSWORD is the only required variable for the container to run successfully. We also pass the POSTGRES_USER variable just so we see how to pass other environment variables to a particular service as well.\nAnd from the PG_DATA section on the webpage, we can find that default directory where postgres stores the data is /var/lib/postgresql/data directory, and that is the directory that we choose to mount in a named volume in our compose file.\nNow that we have MOST of the terminology that a docker-compose.yml file has, it is time to run the compose file to see things in action.\nIMPORTANT: Before running the next part, be sure to have Docker Compose installed. Please follow this link to install the Compose tool on your machine.\nRunning your containersüì¶ Run the below command in your terminal to start all the services from the docker-compose.yml file.\ndocker-compose up NOTE: Depending on which tool you install, you should either have the docker-compose up command or the docker compose up command.\nOnce you run the command, you should see something like this in your terminal window:\n\u003e docker-compose up \u003e docker-compose up Creating network \"user_default\" with the default driver Pulling postgres (postgres:)... latest: Pulling from library/postgres 8740c948ffd4: Pull complete c8dbd2beab50: Pull complete 05d9dc9d0fbd: Pull complete ddd89d5ec714: Pull complete f98bb9f03867: Pull complete 0554611e703f: Pull complete 64e0a8694477: Pull complete 8b868a753f47: Pull complete 12ed9aefbab3: Pull complete 825b08d51ffd: Pull complete 8f272b487267: Pull complete ba2eed7bd2cc: Pull complete ff59f63f47d6: Pull complete Digest: sha256:6b07fc4fbcf551ea4546093e90cecefc9dc60d7ea8c56a4ace704940b6d6b7a3 Status: Downloaded newer image for postgres:latest Pulling pgadmin (dpage/pgadmin4:)... latest: Pulling from dpage/pgadmin4 8921db27df28: Pull complete d10ee54273de: Pull complete 3cf1e77a6858: Pull complete 07b97201e1e9: Pull complete b77bae207213: Pull complete 0fcc0c06a94f: Pull complete 3c9a847b1b09: Pull complete 6ad9bb3cc48b: Pull complete 246134c219b2: Pull complete ac0085153d3a: Pull complete 8860f79c6eae: Pull complete 8b0e5eb7caab: Pull complete 2387bc6168f4: Pull complete 0be474dc7144: Pull complete Digest: sha256:79b2d8da14e537129c28469035524a9be7cfe9107764cc96781a166c8374da1f Status: Downloaded newer image for postgres:latest Status: Downloaded newer image for dpage/pgadmin4:latest Creating user_postgres_1 ... done # Creating Users Creating user_pgadmin_1 ... done Attaching to user_postgres_1, user_pgadmin_1 # Starting services postgres_1 | postgres_1 | PostgreSQL Database directory appears to contain a database; Skipping initialization postgres_1 | postgres_1 | 2023-01-21 23:47:11.847 UTC [1] LOG: starting PostgreSQL 15.1 (Debian 15.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit postgres_1 | 2023-01-21 23:47:11.847 UTC [1] LOG: listening on IPv4 address \"0.0.0.0\", port 5432 postgres_1 | 2023-01-21 23:47:11.847 UTC [1] LOG: listening on IPv6 address \"::\", port 5432 postgres_1 | 2023-01-21 23:47:12.035 UTC [1] LOG: listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\" postgres_1 | 2023-01-21 23:47:12.233 UTC [29] LOG: database system was interrupted; last known up at 2023-01-17 13:43:30 UTC postgres_1 | 2023-01-21 23:47:14.213 UTC [29] LOG: database system was not properly shut down; automatic recovery in progress postgres_1 | 2023-01-21 23:47:14.315 UTC [29] LOG: redo starts at 0/249F8F8 postgres_1 | 2023-01-21 23:47:14.315 UTC [29] LOG: invalid record length at 0/249F9E0: wanted 24, got 0 postgres_1 | 2023-01-21 23:47:14.315 UTC [29] LOG: redo done at 0/249F9A8 system usage: CPU: user: 0.00 s, system: 0.00 s, elapsed: 0.00 s postgres_1 | 2023-01-21 23:47:14.469 UTC [27] LOG: checkpoint starting: end-of-recovery immediate wait postgres_1 | 2023-01-21 23:47:14.948 UTC [27] LOG: checkpoint complete: wrote 3 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.149 s, sync=0.049 s, total=0.564 s; sync files=2, longest=0.025 s, average=0.025 s; distance=0 kB, estimate=0 kB postgres_1 | 2023-01-21 23:47:14.999 UTC [1] LOG: database system is ready to accept connections # Now pgAdmin starts pgadmin_1 | [2023-01-21 23:47:19 +0000] [1] [INFO] Starting gunicorn 20.1.0 pgadmin_1 | [2023-01-21 23:47:19 +0000] [1] [INFO] Listening at: http://[::]:80 (1) pgadmin_1 | [2023-01-21 23:47:19 +0000] [1] [INFO] Using worker: gthread pgadmin_1 | [2023-01-21 23:47:19 +0000] [86] [INFO] Booting worker with pid: 86 From the above output of running the docker-compose.yml file, we see note the following:\nThe images are first pulled, which is what we saw in the Docker Images post, Once they are pulled, we see the there are users created that we had defined in the compose file above. However, you should see at # Creating Users line in the description above to see that the user names have the prefix _1 attached to them. This is the default behaviour by Docker, and we can have our own prefix by passing the argument -p OUR_PREFIX_NAME. On the comment # Starting Services in the above output, we see that the services themselves have started. We see first logs from the postgres service, and then from the pgadmin service. Notice that the pgadmin service only starts after the # Now pgAdmin starts comment in the above output. This is inline with the depends_on clause that we had defined in our compose file. Once you see the above output, you can go on localhost:1542 (or whichever port you had chosen to be exposed on your local machine), and you should see the pgAdmin default webpage. Once there, login with the email and the password defined in the PGADMIN_DEFAULT_EMAIL and the PGADMIN_DEFAULT_PASSWORD environment variables. You should then be logged in, and should then see that the default postgres database is also visible.\nCongratulationsüôåüéâü•≥üôåüéâü•≥ Well Well Well!! Congratulations to you on being a pro Docker user and on coming this far.\nYou are now equipped with the most awesome and popular microservice creation tool in your skills bag. With this skill, you are now unstoppable in creating the largest piece of software by dividing it into many smaller parts, that are much easier to manage than a giant Monolith of code.\nThank you for reading this far, and I hope I was able to help you learn something new!! Until next time üòéüòéüòé\n","wordCount":"2492","inLanguage":"en","image":"https://tcude.net/content/images/2022/01/MainImage-2.jpeg","datePublished":"2022-10-13T05:34:54Z","dateModified":"2022-10-13T05:34:54Z","author":{"@type":"Person","name":"Tanmay"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tanmaychimurkar.github.io/posts/docker/docker_compose/"},"publisher":{"@type":"Organization","name":"Tanmay's Blog","logo":{"@type":"ImageObject","url":"https://tanmaychimurkar.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tanmaychimurkar.github.io accesskey=h title="Tanmay's Blog (Alt + H)">Tanmay's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tanmaychimurkar.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://tanmaychimurkar.github.io/categories title=Categories><span>Categories</span></a></li><li><a href=https://tanmaychimurkar.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://tanmaychimurkar.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tanmaychimurkar.github.io>Home</a>&nbsp;¬ª&nbsp;<a href=https://tanmaychimurkar.github.io/posts/>Posts</a>&nbsp;¬ª&nbsp;<a href=https://tanmaychimurkar.github.io/posts/docker/>Docker</a></div><h1 class=post-title>Docker Compose</h1><div class=post-description>This post explores how we can run multiple Docker containers using a Docker Compose file</div><div class=post-meta><span title='2022-10-13 05:34:54 +0000 UTC'>October 13, 2022</span>&nbsp;¬∑&nbsp;12 min&nbsp;¬∑&nbsp;Tanmay&nbsp;|&nbsp;<a href=https://github.com/tanmaychimurkar/tanmaychimurkar.github.io/tree/main/content/posts/docker/docker_compose.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://tcude.net/content/images/2022/01/MainImage-2.jpeg alt=Docker><p>The Docker Compose file orchestrating multiple Docker Containers</p></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#why-docker-compose aria-label="Why Docker Compose‚ÅâÔ∏è">Why <code>Docker Compose</code>‚ÅâÔ∏è</a><ul><li><a href=#what-is-docker-compose-file aria-label="What is Docker Compose file?üêô">What is <code>Docker Compose</code> file?üêô</a></li><li><a href=#docker-composeyml-terminology aria-label="docker-compose.yml terminologyüìö"><code>docker-compose.yml</code> terminologyüìö</a></li></ul></li><li><a href=#structure-of-the-docker-composeyml-file aria-label="Structure of the docker-compose.yml fileüìã">Structure of the <code>docker-compose.yml</code> fileüìã</a><ul><li><a href=#get-variables-for-a-service-based-on-the-image aria-label="Get variables for a service based on the imageüîç">Get variables for a <code>service</code> based on the <code>image</code>üîç</a></li></ul></li><li><a href=#running-your-containers aria-label="Running your containersüì¶">Running your containersüì¶</a></li><li><a href=#congratulations aria-label=Congratulationsüôåüéâü•≥üôåüéâü•≥>Congratulationsüôåüéâü•≥üôåüéâü•≥</a></li></ul></div></details></div><div class=post-content><h2 id=why-docker-compose>Why <code>Docker Compose</code>‚ÅâÔ∏è<a hidden class=anchor aria-hidden=true href=#why-docker-compose>#</a></h2><p>In the <a href=https://tanmaychimurkar.github.io/posts/docker/docker_containers/ title="Docker Containers">previous</a> post, we saw how to run a Docker Container from a Docker image, either custom or pre-built image from the <a href=https://hub.docker.com/>DockerHub</a>. However, as we discussed, a big software is not built on just one Docker Container but many containers, working as microservices. When running multiple such containers, it is important that they are able to interact with each other, be able to exchange data, and thus act as independent blocks of a larger piece of software. In this post, we will go over how to thus run multiple containers together.</p><h3 id=what-is-docker-compose-file>What is <code>Docker Compose</code> file?üêô<a hidden class=anchor aria-hidden=true href=#what-is-docker-compose-file>#</a></h3><p>Running multiple containers can be done by a <code>Docker Compose</code> file, that acts as a configuration file to choose multiple <code>Docker Images</code> and start them as containers, such that they are able to interact with each other.</p><p><code>Docker Compose</code> file, also known as <code>docker-compose.yml</code>, is a configuration file used to define the services, networks and volumes for a multi-container Docker application. With the help of <code>docker-compose</code> command, the services defined in the file can be easily started, stopped, scaled, and managed as a single unit. The file is written in <code>YAML</code> format, which is easy to read and understand. It allows developers to define the complete environment for an application in a single file, and manage it more efficiently.</p><p>Don&rsquo;t be fooled by me throwing the terms <code>services</code>, <code>networks</code> and <code>volumes</code> from the description as some sort of concepts that everyone must know. These are terminologies specific to the <code>docker-compose.yml</code> file, and are used as a standard base to create the compose configuration file. Let&rsquo;s look at them in a short detail below.</p><h3 id=docker-composeyml-terminology><code>docker-compose.yml</code> terminologyüìö<a hidden class=anchor aria-hidden=true href=#docker-composeyml-terminology>#</a></h3><p>Below is a list of some of the main terminology that a <code>docker-compose.yml</code> file should follow.</p><ol><li><p><code>services</code>: The <code>services</code> section is used to define the individual components or microservices that make up the application. Each service is defined as a separate block, with its own configuration options. The options available for each service include the <code>image</code> to use, <code>environment variables</code>, <code>ports</code> to expose, <code>volumes</code> to mount, and links to other services. For example, a simple web application might have two services: a web server and a database. The web server service would be defined with the image to use, environment variables, and ports to expose. The database service would be defined with the image to use, environment variables, and volumes to mount.</p></li><li><p><code>networks</code>: The <code>networks</code> section is used to define virtual networks that the services in the application can connect to. Services can be connected to multiple networks, allowing them to communicate with each other. When a <code>service</code> is connected to a network, it is given an IP address on that network and can communicate with other services on the same network using their IP addresses. This allows services to be isolated from the host system and from the external network, while still being able to communicate with each other. It&rsquo;s also possible to create custom networks and connect services to them. For example, a <code>docker-compose.yml</code> file may define a default network called <code>default</code> and a custom network called <code>backend</code> where all services that need to communicate with each other privately are connected to.</p></li><li><p><code>volumes</code>: The <code>volumes</code> section is used to define storage volumes that can be used by the services in the application. A volume is a way to store data outside a container&rsquo;s filesystem, so that it can be accessed by multiple containers and persist data even if the container is deleted. The storage volumes defined by us are stored in our local machine, under the <code>/var/lib/docker/volumes</code> folder. <code>Volumes</code> can be defined in a <code>docker-compose.yml</code> file and then mounted to a specific service&rsquo;s container. They can also be defined as <code>external</code>, which means that they are managed outside <code>docker-compose</code> and can be shared by multiple applications. For example, if you have a service that needs to store some data, you can create a volume and mount it to that service&rsquo;s container. This way, even if the container is recreated or deleted, the data stored in the volume will persist. It&rsquo;s also possible to use named volumes, which allows you to reference the volume by name instead of by path on the host. This can make it easier to manage volumes across different environments.</p></li></ol><p>These are only some of the standard terms that are in the <code>docker-compose</code> file. However, let us now look at an example of the <code>docker-compose</code> file itself to see what the structure of it is.</p><h2 id=structure-of-the-docker-composeyml-file>Structure of the <code>docker-compose.yml</code> fileüìã<a hidden class=anchor aria-hidden=true href=#structure-of-the-docker-composeyml-file>#</a></h2><p>As we read before, the <code>docker-compose.yml</code> is only a <code>YAML</code> configuration file. Below is the structure of a very small compose file, that runs the <a href=https://www.postgresql.org/><code>PostgreSQL</code></a>
and the <a href=https://www.pgadmin.org/>pgAdmin</a> UI tool together.</p><p>The below <code>docker-compose.yml</code> file is designed in such a way that we use most of the possible terms that appear in the <code>docker-compose.yml</code> file. Do not worry if you don&rsquo;t completely understand each and every term in the file, we will go through their descriptions later. For now, let us have a look at how the file itself looks first.</p><p><code>NOTE</code>: If you want to learn more about what <code>YAML</code> files are, have a look at <a href=https://tanmaychimurkar.github.io/posts/configurations/yaml_files/ title="YAML Configuration Files">YAML</a> or read the official <a href=https://yaml.org/>YAML</a> documentation.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;3&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>postgres</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>POSTGRES_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>POSTGRES_USER</span><span class=p>:</span><span class=w> </span><span class=l>postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=m>5432</span><span class=p>:</span><span class=m>5432</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>postgres:/var/lib/postgresql/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pgadmin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>dpage/pgadmin4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>PGADMIN_DEFAULT_EMAIL</span><span class=p>:</span><span class=w> </span><span class=l>admin@pgadmin.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>PGADMIN_DEFAULT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>PGADMIN_LISTEN_PORT</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=m>1542</span><span class=p>:</span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>pgadmin:/var/lib/pgadmin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=l>postgres</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>postgres</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pgadmin</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></div><p>We can now see that the terms <code>services</code> and <code>volumes</code> are defined in the above compose file, however there are also new terms that we did not yet see. Let us now go through the compose file above to see what each entry means.</p><ol><li><code>postgres/pgadmin</code>: This is the name we want to give to the <code>services</code> before we start defining them. Once we run the containers defined in the compose file, we will see each running container for a service by this name. And just like in the <a href=https://tanmaychimurkar.github.io/posts/docker/docker_containers/ title="Docker Containers">previous</a> post, we can <code>exec</code> into each of the <code>services</code> by the name that we choose to give it. Please note that the name is given by us, and is not something that is attached to a particular image.</li><li><code>image</code>: This is the image that we want the <code>service</code> to use when we run it. This can be either an image from the <a href=https://hub.docker.com/>DockerHub</a>, or our own image. If we are using owr own custom image in the compose file, then it&rsquo;s <code>relative path</code> compared to the <code>docker-compose.yml</code> file should be passed in the <code>image</code> term.</li><li><code>environment</code>: This term defines a list of <code>environment</code> variables that we want our <code>services</code> to use. The <code>environment</code> variables are not shared across different services, and should be defined individually for each of the service that we define in the <code>docker-compose</code> file.</li><li><code>ports</code>: This term is central for the end user running the <code>docker-compose</code> file. This term defines the <code>port</code> that is to be exposed on the local machine from inside the <code>docker</code> network that is defined when the <code>docker-compose.yml</code> file is run. For us to be able to access a running application, we define the port in the first part of the ports, and the second part is the port that the <code>service</code> is running on inside the docker <code>network</code>.</li><li><code>volumes</code>: There are 2 ways <code>volumes</code> can be defined in the <code>docker-compose</code> file:<ol><li><code>named volumes</code>: These volumes are managed by docker-compose and can be referenced by name in the docker-compose.yml file.</li><li><code>bind mounts</code>: These volumes are defined by a specific path on the host machine and mounted inside the container.
Usually, it is advised to use <code>named volumes</code> instead of <code>bind volumes</code> in the compose file, as <code>named volumes</code> are managed directly by <code>Docker</code>, and can be moved/deleted using the <code>Docker CLI</code>.
The <code>volume</code> that is defined in the above compose file are also <code>named volumes</code>, where the first half of the <code>volumes</code> term is the name we want to give to the names volume, and the second half is the actual location of the directory that we want to be stored in our named <code>volume</code>.</li></ol></li><li><code>depends_on</code>: This is a term that controls if a service is dependent on any other service. We have to define the names of the <code>services</code> that we want to start before the current <code>service</code> where the <code>depends_on</code> term is defined. This makes sense by looking at the above scenario: We do not want the <code>pgadmin</code> service to start before the <code>postgres</code> service, as there will be no database to attach to, and thus the tool will not be able to locate our database.</li></ol><p>Phew!! That was a very long terminology that is followed inside the <code>docker-compose.yml</code> file. However, there should still be some alarm bells ringing in your head if you read the above descriptions.</p><blockquote><ol><li>How do we know what <code>volume</code> to mount on our local machine?</li><li>How do we know what <code>environment</code> variables to define for a <code>service</code> to be able to run successfully?</li><li>What is the default <code>port</code> that are particular service starts at when we run it?</li></ol></blockquote><p>Fret not! These questions all have a answer that is easy to find.</p><h3 id=get-variables-for-a-service-based-on-the-image>Get variables for a <code>service</code> based on the <code>image</code>üîç<a hidden class=anchor aria-hidden=true href=#get-variables-for-a-service-based-on-the-image>#</a></h3><p>All the above questions are dependent on the <code>Docker Image</code> that a particular <code>service</code> is using. For example, if you look at the <code>Environment Variables</code> section of the <a href=https://hub.docker.com/>postgres</a> image on DockerHub, then you will find that the <code>environment</code> variable <code>POSTGRES_PASSWORD</code> is the only required variable for the container to run successfully. We also pass the <code>POSTGRES_USER</code> variable just so we see how to pass other <code>environment</code> variables to a particular service as well.</p><p>And from the <code>PG_DATA</code> section on the webpage, we can find that default directory where <code>postgres</code> stores the data is <code>/var/lib/postgresql/data</code> directory, and that is the directory that we choose to mount in a <code>named</code> volume in our compose file.</p><p>Now that we have MOST of the terminology that a <code>docker-compose.yml</code> file has, it is time to run the <code>compose</code> file to see things in action.</p><p><code>IMPORTANT</code>: Before running the next part, be sure to have <code>Docker Compose</code> installed. Please follow <a href=https://docs.docker.com/compose/install/>this</a> link to install the <code>Compose</code> tool on your machine.</p><h2 id=running-your-containers>Running your containersüì¶<a hidden class=anchor aria-hidden=true href=#running-your-containers>#</a></h2><p>Run the below command in your terminal to start all the <code>services</code> from the <code>docker-compose.yml</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker-compose up
</span></span></code></pre></div><p><code>NOTE</code>: Depending on which tool you install, you should either have the <code>docker-compose up</code> command or the <code>docker compose up</code> command.</p><p>Once you run the command, you should see something like this in your terminal window:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; docker-compose up
</span></span><span class=line><span class=cl>&gt; docker-compose up
</span></span><span class=line><span class=cl>Creating network <span class=s2>&#34;user_default&#34;</span> with the default driver
</span></span><span class=line><span class=cl>Pulling postgres <span class=o>(</span>postgres:<span class=o>)</span>...
</span></span><span class=line><span class=cl>latest: Pulling from library/postgres
</span></span><span class=line><span class=cl>8740c948ffd4: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>c8dbd2beab50: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>05d9dc9d0fbd: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>ddd89d5ec714: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>f98bb9f03867: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>0554611e703f: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>64e0a8694477: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>8b868a753f47: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>12ed9aefbab3: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>825b08d51ffd: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>8f272b487267: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>ba2eed7bd2cc: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>ff59f63f47d6: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>Digest: sha256:6b07fc4fbcf551ea4546093e90cecefc9dc60d7ea8c56a4ace704940b6d6b7a3
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> postgres:latest
</span></span><span class=line><span class=cl>Pulling pgadmin <span class=o>(</span>dpage/pgadmin4:<span class=o>)</span>...
</span></span><span class=line><span class=cl>latest: Pulling from dpage/pgadmin4
</span></span><span class=line><span class=cl>8921db27df28: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>d10ee54273de: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>3cf1e77a6858: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>07b97201e1e9: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>b77bae207213: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>0fcc0c06a94f: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>3c9a847b1b09: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>6ad9bb3cc48b: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>246134c219b2: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>ac0085153d3a: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>8860f79c6eae: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>8b0e5eb7caab: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>2387bc6168f4: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>0be474dc7144: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>Digest: sha256:79b2d8da14e537129c28469035524a9be7cfe9107764cc96781a166c8374da1f
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> postgres:latest
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> dpage/pgadmin4:latest
</span></span><span class=line><span class=cl>Creating user_postgres_1 ... <span class=k>done</span> <span class=c1># Creating Users</span>
</span></span><span class=line><span class=cl>Creating user_pgadmin_1  ... <span class=k>done</span>
</span></span><span class=line><span class=cl>Attaching to user_postgres_1, user_pgadmin_1
</span></span><span class=line><span class=cl><span class=c1># Starting services</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> PostgreSQL Database directory appears to contain a database<span class=p>;</span> Skipping initialization
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:11.847 UTC <span class=o>[</span>1<span class=o>]</span> LOG:  starting PostgreSQL 15.1 <span class=o>(</span>Debian 15.1-1.pgdg110+1<span class=o>)</span> on x86_64-pc-linux-gnu, compiled by gcc <span class=o>(</span>Debian 10.2.1-6<span class=o>)</span> 10.2.1 20210110, 64-bit
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:11.847 UTC <span class=o>[</span>1<span class=o>]</span> LOG:  listening on IPv4 address <span class=s2>&#34;0.0.0.0&#34;</span>, port <span class=m>5432</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:11.847 UTC <span class=o>[</span>1<span class=o>]</span> LOG:  listening on IPv6 address <span class=s2>&#34;::&#34;</span>, port <span class=m>5432</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:12.035 UTC <span class=o>[</span>1<span class=o>]</span> LOG:  listening on Unix socket <span class=s2>&#34;/var/run/postgresql/.s.PGSQL.5432&#34;</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:12.233 UTC <span class=o>[</span>29<span class=o>]</span> LOG:  database system was interrupted<span class=p>;</span> last known up at 2023-01-17 13:43:30 UTC
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.213 UTC <span class=o>[</span>29<span class=o>]</span> LOG:  database system was not properly shut down<span class=p>;</span> automatic recovery in progress
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.315 UTC <span class=o>[</span>29<span class=o>]</span> LOG:  redo starts at 0/249F8F8
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.315 UTC <span class=o>[</span>29<span class=o>]</span> LOG:  invalid record length at 0/249F9E0: wanted 24, got <span class=m>0</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.315 UTC <span class=o>[</span>29<span class=o>]</span> LOG:  redo <span class=k>done</span> at 0/249F9A8 system usage: CPU: user: 0.00 s, system: 0.00 s, elapsed: 0.00 s
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.469 UTC <span class=o>[</span>27<span class=o>]</span> LOG:  checkpoint starting: end-of-recovery immediate <span class=nb>wait</span>
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.948 UTC <span class=o>[</span>27<span class=o>]</span> LOG:  checkpoint complete: wrote <span class=m>3</span> buffers <span class=o>(</span>0.0%<span class=o>)</span><span class=p>;</span> <span class=m>0</span> WAL file<span class=o>(</span>s<span class=o>)</span> added, <span class=m>0</span> removed, <span class=m>0</span> recycled<span class=p>;</span> <span class=nv>write</span><span class=o>=</span>0.149 s, <span class=nv>sync</span><span class=o>=</span>0.049 s, <span class=nv>total</span><span class=o>=</span>0.564 s<span class=p>;</span> sync <span class=nv>files</span><span class=o>=</span>2, <span class=nv>longest</span><span class=o>=</span>0.025 s, <span class=nv>average</span><span class=o>=</span>0.025 s<span class=p>;</span> <span class=nv>distance</span><span class=o>=</span><span class=m>0</span> kB, <span class=nv>estimate</span><span class=o>=</span><span class=m>0</span> kB
</span></span><span class=line><span class=cl>postgres_1  <span class=p>|</span> 2023-01-21 23:47:14.999 UTC <span class=o>[</span>1<span class=o>]</span> LOG:  database system is ready to accept connections
</span></span><span class=line><span class=cl><span class=c1># Now pgAdmin starts</span>
</span></span><span class=line><span class=cl>pgadmin_1   <span class=p>|</span> <span class=o>[</span>2023-01-21 23:47:19 +0000<span class=o>]</span> <span class=o>[</span>1<span class=o>]</span> <span class=o>[</span>INFO<span class=o>]</span> Starting gunicorn 20.1.0
</span></span><span class=line><span class=cl>pgadmin_1   <span class=p>|</span> <span class=o>[</span>2023-01-21 23:47:19 +0000<span class=o>]</span> <span class=o>[</span>1<span class=o>]</span> <span class=o>[</span>INFO<span class=o>]</span> Listening at: http://<span class=o>[</span>::<span class=o>]</span>:80 <span class=o>(</span>1<span class=o>)</span>
</span></span><span class=line><span class=cl>pgadmin_1   <span class=p>|</span> <span class=o>[</span>2023-01-21 23:47:19 +0000<span class=o>]</span> <span class=o>[</span>1<span class=o>]</span> <span class=o>[</span>INFO<span class=o>]</span> Using worker: gthread
</span></span><span class=line><span class=cl>pgadmin_1   <span class=p>|</span> <span class=o>[</span>2023-01-21 23:47:19 +0000<span class=o>]</span> <span class=o>[</span>86<span class=o>]</span> <span class=o>[</span>INFO<span class=o>]</span> Booting worker with pid: <span class=m>86</span>
</span></span></code></pre></div><p>From the above output of running the <code>docker-compose.yml</code> file, we see note the following:</p><ol><li>The images are first pulled, which is what we saw in the <a href=https://tanmaychimurkar.github.io/posts/docker/docker_images/ title="Docker Images">Docker Images</a> post,</li><li>Once they are pulled, we see the there are <code>users</code> created that we had defined in the compose file above. However, you should see at <code># Creating Users</code> line in the description above to see that the <code>user</code> names have the prefix <code>_1</code> attached to them. This is the default behaviour by <code>Docker</code>, and we can have our own prefix by passing the argument <code>-p OUR_PREFIX_NAME</code>.</li><li>On the comment <code># Starting Services</code> in the above output, we see that the services themselves have started. We see first logs from the <code>postgres</code> service, and then from the <code>pgadmin</code> service. Notice that the <code>pgadmin</code> service only starts after the <code># Now pgAdmin starts</code> comment in the above output. This is inline with the <code>depends_on</code> clause that we had defined in our <code>compose</code> file.</li></ol><p>Once you see the above output, you can go on <code>localhost:1542</code> (or whichever port you had chosen to be exposed on your local machine), and you should see the <code>pgAdmin</code> default webpage. Once there, login with the <code>email</code> and the <code>password</code> defined in the <code>PGADMIN_DEFAULT_EMAIL</code> and the <code>PGADMIN_DEFAULT_PASSWORD</code> environment variables. You should then be logged in, and should then see that the default <code>postgres</code> database is also visible.</p><h2 id=congratulations>Congratulationsüôåüéâü•≥üôåüéâü•≥<a hidden class=anchor aria-hidden=true href=#congratulations>#</a></h2><p>Well Well Well!! Congratulations to you on being a pro Docker user and on coming this far.</p><p>You are now equipped with the most awesome and popular microservice creation tool in your skills bag. With this skill, you are now unstoppable in creating the largest piece of software by dividing it into many smaller parts, that are much easier to manage than a giant Monolith of code.</p><p>Thank you for reading this far, and I hope I was able to help you learn something new!! Until next time üòéüòéüòé</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://tanmaychimurkar.github.io/tags/docker/>Docker</a></li><li><a href=https://tanmaychimurkar.github.io/tags/microservices/>microservices</a></li></ul><nav class=paginav><a class=prev href=https://tanmaychimurkar.github.io/posts/configurations/yaml_files/><span class=title>¬´ Prev</span><br><span>Configuration files</span></a>
<a class=next href=https://tanmaychimurkar.github.io/posts/docker/docker_containers/><span class=title>Next ¬ª</span><br><span>Docker Containers</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on twitter" href="https://twitter.com/intent/tweet/?text=Docker%20Compose&url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f&hashtags=Docker%2cmicroservices"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f&title=Docker%20Compose&summary=Docker%20Compose&source=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f&title=Docker%20Compose"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on whatsapp" href="https://api.whatsapp.com/send?text=Docker%20Compose%20-%20https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker Compose on telegram" href="https://telegram.me/share/url?text=Docker%20Compose&url=https%3a%2f%2ftanmaychimurkar.github.io%2fposts%2fdocker%2fdocker_compose%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tanmaychimurkar.github.io>Tanmay's Blog</a></span>
<span>Made with &#128151; with
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>